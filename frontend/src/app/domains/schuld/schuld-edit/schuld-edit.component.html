<form class="ausgabe-form" [formGroup]="form" (ngSubmit)="save()">
  <mat-card>

    <mat-card-title>Schuld erfassen/mutieren</mat-card-title>
    <mat-card-content>

      <!-- Jahr -->
      <mat-form-field class="full-width">
        <mat-label>Jahr</mat-label>
        <input
          matInput
          type="number"
          formControlName="jahr"
          placeholder="Jahr"
        />

        @if (form.get('jahr')?.hasError('required') && form.get('jahr')?.touched) {
          <mat-error>Jahr ist erforderlich</mat-error>
        }
        @if (form.get('jahr')?.hasError('min') && form.get('jahr')?.touched) {
          <mat-error>Jahr muss grösser als 2000 sein</mat-error>
        }
      </mat-form-field>

      <!-- Art -->
      <mat-form-field class="full-width">
        <mat-label>Art</mat-label>
        <mat-select formControlName="art">
          @for (a of artValues; track a) {
            <mat-option [value]="a">
              {{ a }}
            </mat-option>
          }
        </mat-select>

        @if (form.get('art')?.hasError('required') && form.get('art')?.touched) {
          <mat-error>Art ist erforderlich</mat-error>
        }
      </mat-form-field>

      <!-- Gläubiger -->
      <mat-form-field class="full-width">
        <mat-label>Gläubiger</mat-label>
        <input
          matInput
          formControlName="glaeubiger"
          placeholder="Gläubiger"
        />

        @if (form.get('glaeubiger')?.hasError('required') && form.get('glaeubiger')?.touched) {
          <mat-error>Gläubiger ist erforderlich</mat-error>
        }
      </mat-form-field>

      <!-- Text -->
      <mat-form-field class="full-width">
        <mat-label>Text</mat-label>
        <input
          matInput
          formControlName="text"
          placeholder="Text"
        />
      </mat-form-field>

      <!-- Betrag -->
      <mat-form-field class="full-width">
        <mat-label>Betrag</mat-label>
        <input
          matInput
          type="number"
          formControlName="betrag"
          placeholder="Betrag (positiv)"
        />
        <span matTextSuffix>CHF</span>

        @if (form.get('betrag')?.hasError('required') && form.get('betrag')?.touched) {
          <mat-error>Betrag ist erforderlich</mat-error>
        }
        @if (form.get('betrag')?.hasError('min') && form.get('betrag')?.touched) {
          <mat-error>Betrag muss grösser als 0 sein</mat-error>
        }
      </mat-form-field>

      <!-- Zinsen -->
      <mat-form-field class="full-width">
        <mat-label>Zinsen</mat-label>
        <input
          matInput
          type="number"
          formControlName="zinsen"
          placeholder="Zinsen (positiv)"
        />
        <span matTextSuffix>CHF</span>

        @if (form.get('zinsen')?.hasError('min') && form.get('zinsen')?.touched) {
          <mat-error>Zinsen muss grösser als 0 sein</mat-error>
        }
      </mat-form-field>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-button type="button" [routerLink]="'/schuld'">
        Abbrechen
      </button>
      <button mat-button (click)="delete()">
        Löschen
      </button>
      <button mat-flat-button color="primary" type="submit">
        Speichern
      </button>
    </mat-card-actions>

  </mat-card>
</form>

